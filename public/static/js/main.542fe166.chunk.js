(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(25)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(8),o=n.n(s),c=(n(15),n(2)),i=n(3),u=n(1),l=n(4),m=n(5);n(16),n(17);var h=n(6),d=(n(18),function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={amount:"",description:"",merchant:"",timestamp:"",category:"",displayForm:!1,showCategoryInput:!1},a.handleInputChange=a.handleInputChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.setDateTimePickerToNow=a.setDateTimePickerToNow.bind(Object(u.a)(a)),a.toggleExpenseForm=a.toggleExpenseForm.bind(Object(u.a)(a)),a.populateCategory=a.populateCategory.bind(Object(u.a)(a)),a.revealCategoryInput=a.revealCategoryInput.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setDateTimePickerToNow()}},{key:"render",value:function(){return this.state.displayForm?this.renderNewExpenseForm():this.renderAddExpenseToggle()}},{key:"renderAddExpenseToggle",value:function(){return r.a.createElement("div",{className:"add-expense-toggle",onClick:this.toggleExpenseForm},r.a.createElement("span",{className:"plus"},"+"))}},{key:"renderNewExpenseForm",value:function(){return r.a.createElement("div",{className:"new-expense-form card"},r.a.createElement("h2",null,"New Expense"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"one-input"},r.a.createElement("label",null,"Amount"),r.a.createElement("input",{value:this.state.amount,type:"number",name:"amount",onChange:this.handleInputChange})),r.a.createElement("div",{className:"one-input"},r.a.createElement("label",null,"Description"),r.a.createElement("input",{value:this.state.description,type:"text",name:"description",onChange:this.handleInputChange})),r.a.createElement("div",{className:"one-input"},r.a.createElement("label",null,"Merchant"),r.a.createElement("input",{value:this.state.merchant,type:"text",name:"merchant",onChange:this.handleInputChange})),r.a.createElement("div",{className:"one-input"},r.a.createElement("label",null,"Category"),this.renderCategorySection(),this.renderCategoryInput()),r.a.createElement("div",{className:"one-input"},r.a.createElement("label",null,"Date"),r.a.createElement("input",{value:this.state.timestamp,type:"datetime-local",name:"timestamp",onChange:this.handleInputChange})),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("button",{className:"cancel",onClick:this.toggleExpenseForm},"Cancel"),r.a.createElement("button",{className:"submit",disabled:this.validExpense()},"Add Expense"))))}},{key:"renderCategorySection",value:function(){return r.a.createElement("div",{className:"category-section"},this.renderCategoryList(),this.renderCategoryToggle())}},{key:"revealCategoryInput",value:function(){this.setState({showCategoryInput:!0})}},{key:"renderCategoryInput",value:function(){return this.state.showCategoryInput?r.a.createElement("input",{value:this.state.category,type:"text",name:"category",placeholder:"enter category",onChange:this.handleInputChange}):null}},{key:"renderCategoryList",value:function(){var e=this;return this.props.categories.map((function(t){return t.trim().length?r.a.createElement("span",{key:t,className:"category",onClick:e.populateCategory},t):null}))}},{key:"renderCategoryToggle",value:function(){return this.state.showCategoryInput?null:r.a.createElement("span",{className:"category add-new-category",onClick:this.revealCategoryInput},r.a.createElement("span",{className:"lnr lnr-plus-circle"}))}},{key:"handleInputChange",value:function(e){var t=e.target.name;this.setState(Object(h.a)({},t,e.target.value))}},{key:"populateCategory",value:function(e){this.setState({category:e.target.innerHTML.trim(),showCategoryInput:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault(e);var t={amount:this.state.amount,description:this.state.description,merchant:this.state.merchant,timestamp:this.state.timestamp,category:this.state.category};this.props.submitNewExpense(t)}},{key:"resetState",value:function(){this.setDateTimePickerToNow(),this.setState({amount:"",description:"",merchant:"",category:"subscriptions"})}},{key:"setDateTimePickerToNow",value:function(){var e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString().slice(0,16);this.setState({timestamp:t})}},{key:"validExpense",value:function(){return 0===this.state.amount||this.state.description.length<2||!this.state.timestamp.length}},{key:"toggleExpenseForm",value:function(){this.setState((function(e){return{displayForm:!e.displayForm}}))}}]),n}(a.Component)),g=n(9);n(19);var p=function(e){var t=e.expense;return r.a.createElement("div",{className:"one-expense",key:t.id},r.a.createElement("div",null,r.a.createElement("div",{className:"category"},t.category),r.a.createElement("div",null,r.a.createElement("strong",null,"$",t.amount)," for ",t.description||"Undefined")),r.a.createElement("div",{onClick:function(){e.deleteExpense(t.id)},className:"lnr lnr-cross-circle"}))};n(20);function y(e){var t=e.substring(0,10).split("-");return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][Number(t[1])-1]," ").concat(t[2],", ").concat(t[0])}var v=function(e){return r.a.createElement("div",null,r.a.createElement("h3",{className:"expense-heading"},"Expenses:"),function(e,t){if(!e.length)return r.a.createElement("p",null,"No expenses recorded yet - you should add one!");return function(e){var t=(e=e.sort((function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)}))).map((function(e){return y(e.timestamp)}));return Object(g.a)(new Set(t))}(e).map((function(n){var a=function(e,t){return e.filter((function(e){return y(e.timestamp)===t}))}(e,n),s=function(e,t,n){return e.map((function(e){return r.a.createElement(p,{key:e.id,expense:e,deleteExpense:n})}))}(a,0,t),o=function(e){return e.reduce((function(e,t){return e+t.amount}),0)}(a);return r.a.createElement("div",{className:"day-of-expenses",key:n},r.a.createElement("div",{className:"date-header"},r.a.createElement("span",null,n),r.a.createElement("span",{className:"daily-spending-total"},"$",o)),s)}))}(e.expenses,e.deleteExpense))},f=(n(21),function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).moneySpentToday=a.moneySpentToday.bind(Object(u.a)(a)),a.moneySpentThisMonth=a.moneySpentThisMonth.bind(Object(u.a)(a)),a.dailyBudget=a.dailyBudget.bind(Object(u.a)(a)),a.monthlyBalance=a.monthlyBalance.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"square full-square card"},r.a.createElement("div",{className:"label"},"Left to spend"),r.a.createElement("div",{className:"metric"},this.moneyFormat(this.leftToSpendToday()))),r.a.createElement("div",{className:"half-square-wrapper"},r.a.createElement("div",{className:"card square half-square"},r.a.createElement("div",{className:"label"},"Spent today"),r.a.createElement("div",{className:"metric"},this.moneyFormat(this.moneySpentToday()))),r.a.createElement("div",{className:"card square half-square"},r.a.createElement("div",{className:"label"},"Monthly balance"),r.a.createElement("div",{className:"metric"},this.monthlyBalance()," ",r.a.createElement("span",{className:"submetric"},"/($",this.moneySpentThisMonth(),")")))))}},{key:"moneySpentToday",value:function(){var e=this;return this.props.expenses.reduce((function(t,n){return e.isToday(new Date,n.timestamp)?t+n.amount:t}),0)}},{key:"moneySpentThisMonth",value:function(){var e=this;return this.props.expenses.reduce((function(t,n){return e.isThisMonth(new Date,n.timestamp)?t+n.amount:t}),0)}},{key:"isToday",value:function(e,t){return t=new Date(t),e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}},{key:"isThisMonth",value:function(e,t){return t=new Date(t),e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()}},{key:"leftToSpendToday",value:function(){return this.dailyBudget()-this.moneySpentToday()}},{key:"monthlyBalance",value:function(){var e=new Date;return this.moneyFormat(this.dailyBudget()*e.getDate()-this.moneySpentThisMonth())}},{key:"monthProgress",value:function(){var e=new Date;return Math.floor(e.getDate()/this.daysInMonth(e.getMonth(),e.getYear())*100)}},{key:"dailyBudget",value:function(){var e=new Date;return Math.floor(this.props.monthlyBudget/this.daysInMonth(e.getMonth(),e.getYear()))}},{key:"daysInMonth",value:function(e,t){return new Date(t,e+1,0).getDate()}},{key:"moneyFormat",value:function(e){return e>=0?"$".concat(e):"-$".concat(Math.abs(e))}}]),n}(a.Component));n(22);var E=function(e){return r.a.createElement("div",{className:"nav-bar card"},r.a.createElement("div",{className:"nav-button",onClick:function(){return e.navigateToPage("home")}},r.a.createElement("span",{className:"lnr lnr-home"})),r.a.createElement("div",{className:"nav-button",onClick:function(){return e.navigateToPage("stats")}},r.a.createElement("span",{className:"lnr lnr-chart-bars"})),r.a.createElement("div",{className:"nav-button",onClick:function(){return e.navigateToPage("settings")}},r.a.createElement("span",{className:"lnr lnr-cog"})))},b=(n(23),function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={monthlyBudget:a.props.monthlyBudget,currentMonthlyBudget:a.props.currentMonthlyBudget},a.handleInputChange=a.handleInputChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"setting card"},r.a.createElement("h3",null,"Settings"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"one-input"},r.a.createElement("label",null,"Default budget"),r.a.createElement("input",{value:this.state.monthlyBudget,type:"number",name:"monthlyBudget",onChange:this.handleInputChange})),r.a.createElement("div",{className:"one-input"},r.a.createElement("label",null,"This month's budget"),r.a.createElement("input",{value:this.state.currentMonthlyBudget,type:"number",name:"currentMonthlyBudget",onChange:this.handleInputChange})),r.a.createElement("div",{className:"button-wrapper"},r.a.createElement("button",{className:"submit",disabled:this.validSettings()},"Update Settings"))))}},{key:"handleInputChange",value:function(e){var t=e.target.name;this.setState(Object(h.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(e);var t={monthlyBudget:Number(this.state.monthlyBudget),currentMonthlyBudget:Number(this.state.currentMonthlyBudget)};this.props.updateMonthlyBudget(t)}},{key:"validSettings",value:function(){return 0===this.state.monthlyBudget||0===this.state.currentMonthlyBudget}}]),n}(a.Component)),N=(n(24),function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"stats card"},r.a.createElement("div",{className:"spending-by-category"},this.renderSpendingByCategory()))}},{key:"renderSpendingByCategory",value:function(){var e={};return this.props.expenses.forEach((function(t){var n=t.category;"undefined"===typeof e[n]?e[n]=t.amount:e[n]+=t.amount})),r.a.createElement("div",null,r.a.createElement("div",{className:"one-category-row header"},r.a.createElement("span",{className:"category-name"},"Category"),r.a.createElement("span",{className:"category-amount"},"Sum"),r.a.createElement("span",{className:"category-percentage"},"Budget %")),this.renderSpendingTable(e))}},{key:"renderSpendingTable",value:function(e){var t=this;return Object.keys(e).map((function(t){return{category:t,amount:Number(e[t])}})).sort((function(e,t){return e.amount<t.amount?1:-1})).map((function(e){return r.a.createElement("div",{className:"one-category-row",key:e.category},r.a.createElement("span",{className:"category-name"},e.category),r.a.createElement("span",{className:"category-amount"},"$",e.amount),r.a.createElement("span",{className:"category-percentage"},t.percentage(e.amount),"%"))}))}},{key:"percentage",value:function(e){return Math.floor(e/this.props.monthlyBudget*1e3)/10}}]),n}(a.Component)),k=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={expenses:[],categories:[],monthlyBudget:0,currentMonthlyBudget:0,currentPage:"home"},a.fetchExpenses=a.fetchExpenses.bind(Object(u.a)(a)),a.fetchMonthlyBudget=a.fetchMonthlyBudget.bind(Object(u.a)(a)),a.submitNewExpense=a.submitNewExpense.bind(Object(u.a)(a)),a.deleteExpense=a.deleteExpense.bind(Object(u.a)(a)),a.navigateToPage=a.navigateToPage.bind(Object(u.a)(a)),a.updateMonthlyBudget=a.updateMonthlyBudget.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetchExpenses(),this.fetchMonthlyBudget()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(E,{navigateToPage:this.navigateToPage}),this.renderBodyContent())}},{key:"renderBodyContent",value:function(){return"home"===this.state.currentPage?this.renderHome():"stats"===this.state.currentPage?this.renderStats():"settings"===this.state.currentPage?this.renderSettings():void 0}},{key:"renderHome",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement(f,{expenses:this.state.expenses,monthlyBudget:this.getCurrentBudget()}),r.a.createElement(d,{submitNewExpense:this.submitNewExpense,categories:this.state.categories}),r.a.createElement(v,{expenses:this.state.expenses,deleteExpense:this.deleteExpense}))}},{key:"renderStats",value:function(){return r.a.createElement(N,{expenses:this.state.expenses,categories:this.state.categories,monthlyBudget:this.getCurrentBudget()})}},{key:"renderSettings",value:function(){return r.a.createElement(b,{monthlyBudget:this.state.monthlyBudget,currentMonthlyBudget:this.state.currentMonthlyBudget,updateMonthlyBudget:this.updateMonthlyBudget,key:this.state.monthlyBudget+this.state.currentMonthlyBudget})}},{key:"getCurrentBudget",value:function(){return this.state.currentMonthlyBudget===this.state.monthlyBudget?this.state.monthlyBudget:this.state.currentMonthlyBudget}},{key:"submitNewExpense",value:function(e){var t=this;console.log(e),fetch("/api/v1/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){200===e.status?t.setState({expenses:e.expenses,categories:e.categories}):console.log(e.message)})).catch((function(e){console.log("Error fetching data",e)}))}},{key:"deleteExpense",value:function(e){var t=this;fetch("/api/v1/expenses/".concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){t.setState({expenses:e.expenses,categories:e.categories})})).catch((function(e){console.log("Error fetching data",e)}))}},{key:"fetchExpenses",value:function(){var e=this;fetch("/api/v1/expenses").then((function(e){return e.json()})).then((function(t){e.setState({expenses:t.expenses,categories:t.categories})})).catch((function(e){console.log("Error fetching data",e)}))}},{key:"fetchMonthlyBudget",value:function(){var e=this;fetch("/api/v1/users/monthly-budget").then((function(e){return e.json()})).then((function(t){e.setState({monthlyBudget:t.monthlyBudget,currentMonthlyBudget:t.currentMonthlyBudget})})).catch((function(e){console.log("Error fetching data",e)}))}},{key:"updateMonthlyBudget",value:function(e){var t=this;fetch("/api/v1/users/monthly-budget",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t.setState({monthlyBudget:e.monthlyBudget,currentMonthlyBudget:e.currentMonthlyBudget,currentPage:"home"})})).catch((function(e){console.log("Error fetching data",e)}))}},{key:"navigateToPage",value:function(e){this.setState({currentPage:e})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.542fe166.chunk.js.map